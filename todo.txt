# Code Review TODO List

### Features
- [x] Add image preloading for next/previous images
  - Improve perceived performance in lightbox
  - Preload adjacent images when lightbox opens
- [x] add caption from alt text to visible preview on hover over image
  - Use title attribute or custom tooltip
  - Improve accessibility and UX

### Testing
- [ ] Replace heavy DOM mocking in __tests__/photos.test.js
  - Consider integration tests instead
  - Reduce brittleness of current approach
- [ ] Add network failure tests
  - Test image loading failures
  - Test graceful degradation
- [ ] Add tests for image preloading (once implemented)

### Architecture
- [ ] Consider asset optimization pipeline
  - Image compression step in CI
  - Generate WebP/AVIF formats
  - Add responsive image srcset
  - May be overkill for personal site

## Code Issues Noted

### photos.js:61-62
- handleKeyDown defined inside openLightbox() but referenced in closeLightbox()
- Works but fragile pattern
- Consider making it a module-level function

### photos.js:27-31
- [x] No error handling if image fails to load
- [x] Add onerror handler with fallback

### Configuration
- [x] .npmrc contains pnpm config but npm still used by some tools
  - Fixed by renaming to .pnpmrc
- playwright.config.js has unexplained hardcoded timeouts
- package.json ci script doesn't perfectly match GitHub Actions workflow

## Completed
- [x] Fix pnpm lockfile checksum issue
- [x] Update visual snapshots for lightbox
- [x] Add playwright-report to gitignore
- [x] Verify all CI tests pass
- [x] Comprehensive code review
- [x] Fix npm warnings from serve command (renamed .npmrc to .pnpmrc)
- [x] Install Chromium for Pa11y in CI accessibility tests
